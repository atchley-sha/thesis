# Methods

We are comparing TBMs to ABMs.

We will forecast several specific scenarios and get an idea of computing resources.

## Scenarios

The first scenario is change in land use.

The second scenario is increased transit service.

The third scenario is increased WFH.

All three of these scenarios will be coded in both a representative TBM and ABM.

## WFRC Model

The \acr{WFRC} model is implemented in the CUBE software by Bentley [@bentley_systems_cube], and is currently used by \acr{WFRC} for modeling travel in the Salt Lake City, Utah area.
\acr{WFRC} provided the model directly, including land use forecasts and the current long-range transportation plan.
The model is taken mostly as-is, though some changes were made to better accommodate the different scenarios.
These modifications are noted in more detail in their respective sections.

The \acr{WFRC} model, like many trip-based models, requires the following inputs:

-   **Land use data.** This includes information about population, employment, and socioeconomic variables such as income, delineated by \acr{TAZ}. In our case this was provided by \acr{WFRC} directly, as an output of their land use forecasting model(s).
-   **Travel skims.** This details travel time, cost, etc. between each origin-destination pair of \acr{TAZ}s. The \acr{WFRC} model uses an iterative process of assigning volumes to the transportation network and recalculating the skims, which are used in the mode and destination choice model steps.
-   **Transportation network.** This includes highway, transit, etc. networks which connect the \acr{TAZ}s to each other. These networks contain information such as link speed and capacity. Though the \acr{WFRC} model assigns travel volumes to the network, this research does not compare the model's network assignment results. However, the network volumes are still used to calculate the travel skims.
-   **Model constants and coefficients.** Many model steps, including mode choice, require calibration constants and coefficients. These are taken directly from the \acr{WFRC} model without modification.

How the model works; enumerate and describe each step.
Probably multiple paragraphs.

Model outputs.

## ASIM

ActivitySim is an open-source \acr{ABM} led by a consortium of transportation planning agencies.

ActivitySim is highly configurable, and many agencies have their own bespoke implementation.
This research uses an ActivitySim implementation based on @macfarlane2021, which is in turn based on the prototype configuration for the Metropolitan Transportation Commission serving the San Francisco area [@cite].

ActivitySim, like all ABMs, simulates transportation decisions on an individual level.
ActivitySim has a hierarchical decision tree, where long-term decisions (such as auto ownership and telecommute frequency) are made first, followed by daily and tour- and trip-level decisions such as scheduling and mode choice (@fig-asim-flowchart).

![ActivitySim sub-model flowchart. Long-term decisions are made first, followed by more granular ones.](images/abmexample.jpg){#fig-asim-flowchart fig-scap="ActivitySim sub-model flowchart."}

Describe steps.
Definitely multiple paragraphs.

### Popsim {#sec-populationsim}

What it is.

List inputs (wfrc/census).

(Why not only WFRC?).

Table describing controls.

Outputs?

## Initial model comparison/calibration

We want to calibrate.

Describe baseline scenario for calibration.

### Synth Pop

We compared key attributes (taz population, income, etc).
Number of HH is identical.

Comparison of population totals.

Comparison of median income.

Comparison of income groups.

### Outputs/Trips

We compared mode split, tlfd, and wfh.

Mode split comparison/calibration.

TLFD comparison.

WFH comparison/calibration.

## Computational resources

?

? Our results include the experience of coding the scenarios and analyses as well as the analyses themselves.
