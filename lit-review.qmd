# Literature Review

In the 1970s??, research began in a new "activity-based" modeling framework as an alternative to the traditional "four-step" or "trip-based" approaches.

Activity-based models (ABMs) differ from trip-based models (TBMs) in several ways.

ABMs also claim several advantages over TBMs, including....

This section/chapter discusses these advantages after an overview of the two types of models.

## Comparison of Modeling Frameworks

A key component of any travel demand model is how the population data is structured. There are two main approaches to this: summary statistics or a synthetic population.

Paragraph explaining diagram of information flow for both types. Note that if data is aggregated at any step in the summary stats pipeline, you can't undo that. Not so with a synthetic population.

```{r}
library(tidyverse)
library(igraph)
library(ggnetwork)

tbm_nodes <- read_csv("data/flowchart_comparison/tbm_nodes.csv")
tbm_edges <- read_csv("data/flowchart_comparison/tbm_edges.csv")
tbm_layout <- tbm_nodes %>% 
  select(h,v) %>% 
  as.matrix()

tbm_flowchart <- graph_from_data_frame(tbm_edges, vertices = tbm_nodes) %>% ggnetwork(layout = tbm_layout) %>% 
  mutate(veh_own = str_to_title(veh_own) %>% factor(c("Yes", "No")),
         income = str_to_title(income) %>% factor(c("High", "Low")))

tbm_flowchart %>% 
  ggplot() +
  geom_edges(aes(x, y, xend = xend, yend = yend)) +
  geom_nodes(aes(x, y, shape = veh_own, color = income), size = 20) +
  geom_text(aes(x, y, label = label)) +
  geom_label(x = -0.3, y = 1, label = "Population") +
  geom_label(x = -0.3, y = 0.5, label = "Trip Generation") +
  geom_label(x = -0.3, y = 0, label = "Mode Choice") +
  lims(x = c(-0.4, 1.1), y = c(-0.1, 1.1)) +
  scale_color_manual(na.value = "#d4d4d4", values = c("High" = "#7fcdbb", "Low" = "#2c7fb8")) +
  scale_shape_manual(values = c("Yes" = 15, "No" = 16)) +
  labs(color = "Income Group", shape = "Vehicle Ownership") +
  guides(shape = guide_legend(override.aes = list(size = 10)),
         color = guide_legend(override.aes = list(size = 10))) +
  theme_void()

```

ABMs require **<fact-check>** a synthetic population since the focus is on individuals.

TBMs, with few exceptions, use summary statistics.

These exceptions are worth noting, however. TBMs can use a synthetic population (microsimulation). So what then is the difference? "ABM"s are really "tour-based". This is in a sense a subset of "AB", since an individual's daily activities are scheduled and the tour arises from this. However, other types of ABMs are theoretically possible, and some exist in practice (incl. "activity scheduling" models; this includes I believe MATSim, maybe we should talk about that).

Additional paragraph.

## Claimed Advantages

ABMs are often lauded as superior to TBMs due to their usage of synthetic populations and trip-chaining (tours), which is considered to better represent individual choices. According to Rasouli and Timmermans (2014), there are limits to TBMs that are eliminated with ABMs. The TBM does not consider any kind of dependency between trips on the same tour, and it excludes dependency between the members of a household and between mode choices on a tour. Because of the aggregate population data used in the TBM, it can produce results that are unrelated to actual human behavior. These are some of the issues that are claimed to be remedied with the use of synthetic populations and trip-chaining in ABMs. 

Unlike TBMs, ABMs take into account the specific members of each household within the model and the tours they will take. This creates dependency between the trips that are taken by each individual. For example, if one member of the household drives his car from home to work in the morning, he can not have a trip going from home to the park until he has a return trip from work to home. This situation is taken into account with ABMs. For similar reasons, the creation of tours in ABMs gives room to possible trips that TBMs may not consider. Many destinations are taken because they are close to another destination on the tour and not necessarily close to the residence. TBMs would make trips based on proximity to the household, while ABMs may make trips based on proximity to the tour. 

The dependency that trips have on the tour is similar to the dependency that modes and household members have on each other. If a car is driven to work, then a bike can not be used as the mode to return from work. If a child is driven to school by a parent, then the child can not drive a car home unless it is with someone else. These dependencies within the tours and mode choices will not only affect the trip patterns of the household, but it will also affect the models response to policy. 

However, ABMs do have measurable disadvantages as well. They are computationally expensive and need more data....

It is clear that a synthetic population has distinct advantages over summary statistics. Certain analyses... (equity: don't want to code race/income/gender into mode choice, but want to group results thereby; not possible with summary stats).

Cite Bills and others showing advantages of synthetic population.

These claimed advantages are attributed to the ABM over the TBM, which is mostly correct. As mentioned previously, very few TBMs use a synthetic population, though it's not impossible.

A true advantage of the ABM ("tour-based") over the TBM is the idea of trip-chaining (or tours). Rather than model each trip individually, ABMs model an entire day's activities as zero or more "tours" (travel away from and return to home).

Modeling travel in this way allows for several advantages, including consistent mode choice (a car won't be driven home if it wasn't taken to work). Additionally, further types of analysis are possible, such as Dong et al.'s "activity-based accessibility" measure. <Explain what that is>.

Other advantages or analyses that tours let us perform. Probably a few paragraphs. Maybe it's worth mentioning MATSim or similar again.

Despite these claimed advantages, agencies in practice don't seem to switch very readily; many still use TBMs. There may be several reasons for this (incl. the disadvantages mentioned above).

## Research Gap

ABMs and TBMs have been researched extensively, with ABMs claiming many advantages over TBMs. Additionally, there are disadvantages of ABMs, and {synthetic vs summary stats} $\neq$ {ABM vs TBM}.

However, as of yet there are no side-by-side comparisons of ABMs and TBMs, using the same proposed development scenarios in both. This research seeks to close that gap by modeling multiple scenarios in a TBM and ABM and comparing the strengths and weaknesses of each. What input data is needed? What computational resources are needed? What analyses can we do with each type of model? Are certain types of scenarios suited to one or the other? And ultimately, is there a clear winner between ABMs and TBMs?



Here are some test changes


my second commit
