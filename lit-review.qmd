# Literature Review

In the 1970s??, research began in a new "activity-based" modeling framework as an alternative to the traditional "four-step" or "trip-based" approaches.

Activity-based models (ABMs) differ from trip-based models (TBMs) in several ways.

ABMs also claim several advantages over TBMs, including....

This section/chapter discusses these advantages after an overview of the two types of models.

## Comparison of Modeling Frameworks

A key component of any travel demand model is how the population data is structured. There are two main approaches to this: summary statistics or a synthetic population.

Paragraph explaining diagram of information flow for both types. Note that if data is aggregated at any step in the summary stats pipeline, you can't undo that. Not so with a synthetic population.

```{r}
library(tidyverse)
library(igraph)
library(ggnetwork)

tbm_nodes <- read_csv("data/flowchart_comparison/tbm_nodes.csv")
tbm_edges <- read_csv("data/flowchart_comparison/tbm_edges.csv")
tbm_layout <- tbm_nodes %>% 
  select(h,v) %>% 
  as.matrix()

tbm_flowchart <- graph_from_data_frame(tbm_edges, vertices = tbm_nodes) %>% ggnetwork(layout = tbm_layout) %>% 
  mutate(veh_own = str_to_title(veh_own) %>% factor(c("Yes", "No")),
         income = str_to_title(income) %>% factor(c("High", "Low")))

tbm_flowchart %>% 
  ggplot() +
  geom_edges(aes(x, y, xend = xend, yend = yend)) +
  geom_nodes(aes(x, y, shape = veh_own, color = income), size = 20) +
  geom_text(aes(x, y, label = label)) +
  geom_label(x = -0.3, y = 1, label = "Population") +
  geom_label(x = -0.3, y = 0.5, label = "Trip Generation") +
  geom_label(x = -0.3, y = 0, label = "Mode Choice") +
  lims(x = c(-0.4, 1.1), y = c(-0.1, 1.1)) +
  scale_color_manual(na.value = "#d4d4d4", values = c("High" = "#7fcdbb", "Low" = "#2c7fb8")) +
  scale_shape_manual(values = c("Yes" = 15, "No" = 16)) +
  labs(color = "Income Group", shape = "Vehicle Ownership") +
  guides(shape = guide_legend(override.aes = list(size = 10)),
         color = guide_legend(override.aes = list(size = 10))) +
  theme_void()

```

ABMs require **<fact-check>** a synthetic population since the focus is on individuals.

TBMs, with few exceptions, use summary statistics.

These exceptions are worth noting, however. TBMs can use a synthetic population (microsimulation). So what then is the difference? "ABM"s are really "tour-based". This is in a sense a subset of "AB", since an individual's daily activities are scheduled and the tour arises from this. However, other types of ABMs are theoretically possible, and some exist in practice (incl. "activity scheduling" models; this includes I believe MATSim, maybe we should talk about that).

Additional paragraph.

## Claimed Advantages

ABMs are often lauded as superior to TBMs due to their usage of synthetic populations and trip-chaining (tours), which is considered to better represent individual choices. According to Rasouli and Timmermans (2014), there are limits to TBMs that are eliminated with ABMs. The TBM does not consider any kind of dependency between trips on the same tour, and it excludes dependency between the members of a household and between mode choices on a tour. Because of the aggregate population data used in the TBM, it can produce results that are unrelated to actual human behavior. These are some of the issues that are claimed to be remedied with the use of synthetic populations and trip-chaining in ABMs. 

Unlike TBMs, ABMs take into account the specific members of each household within the model and the tours they will take. This creates dependency between the trips that are taken by each individual. For example, if one member of the household drives his car from home to work in the morning, he can not have a trip going from home to the park until he has a return trip from work to home. This situation is taken into account with ABMs. For similar reasons, the creation of tours in ABMs gives room to possible trips that TBMs may not consider. Many destinations are taken because they are close to another destination on the tour and not necessarily close to the residence. TBMs would make trips based on proximity to the household, while ABMs may make trips based on proximity to the tour. 

The dependency that trips have on the tour is similar to the dependency that modes and household members have on each other. If someone drives to work, then a bike can not be used as the mode to return from work. If a child is driven to school by a parent, then the child can not drive a car home without being driven by someone else. These dependencies within the tours and mode choices will not only affect the trip patterns of the household, but they will also affect the model's results in response to policy. Because the people within the household will have travel patterns that depend on the patterns of others in the household, a policy affecting one person in the household can affect everyone in the household no matter how directly the policy connects to them. This type of dependency isn't possible with TBMs.

The claimed advantages above show some ways in which ABMs give a better picture of reality because of the way they model individual behavior. The ability to more accurately reflect human behavior is largely due to the use of a synthetic population. When individual data from each household is computed, as in ABMs, the results will reflect individual behaviors more accurately than when aggregate household data is gathered, as in TBMs. 

Another advantage of a synthetic population has to do with how the data is used after running the model. Once a simulation is run using aggregate data, there is no further analysis that can be done because their is no connection between the resulting trips and the household data that was used for the model. Running a simulation with data from a synthetic population, on the other hand, gives results based on the movements of each individual in the population. Therefore, after the results are obtained, further analysis can be made to see which groups of people took which trips. Even if a piece of information from the data isn't used to determine coefficients during the simulation, it can be referred to after running the model. For example, the race of each person with a certain mode choice can be found to analyze the affect certain decisions may have on minorities. If extra household information like this was taken into consideration while using aggregate data, it would need to be used in the model. As more connections are made to other pieces of information in the model, like race or income, it will become less accurate dues to the smaller sample sizes of each category. The ability to analyze the data after running the model is an advantage of using a synthetic population.

In an effort to see how synthetic populations in ABMs affect equity analysis, a study was done by Bills and Walker using the 2000 Bay Area Travel Survey to create the synthetic population. The model consisted of 1454 zones representing nine counties in the San Francisco Bay Area. After running a few different scenarios, the results were compared to see the differences that exist among low income and high income populations.

It is important to note that, while many connect them with ABMs, synthetic populations can be used in running both ABMs and TBMs. The difference is that TMBs can work using either a synthetic population or aggregate data, but ABMs require a synthetic population. The larger computing power needed to work with a synthetic population may be the reason why most TBMs are still being run using aggregate data. The fact that more TBMs don't often use synthetic populations could possibly signify a wider acceptance that ABMs are better. If a company is willing to go through the work to create a synthetic population, then they may jump straight to an ABM because they believe it will be most accurate.

If this is the case, one may wonder why there are so many cities that don't switch to ABMs. Even with so many claimed advantages, the disadvantages of ABMs could be the reason for lack of total implementation throughout the world. One of the most obvious disadvantages is the complexity. As alluded to in the previous paragraph, ABMs often take more time, more computing power, and more money to run. The synthetic population needed to run an ABM uses much more data. In areas with thousands of TAZs and millions of people, a super computer is needed, and it will cost much more than what is spent to run TBMs. If a city can see similar results using a TBM, they may decide not to invest in an ABM.

Not only is the ABM complex for computing purposes, it is also complex in implementation. There have been different ABMs created throughout the years, and it hasn't been easy to access. (Cite some sources and put a list of some of the different models that have been introduced through the years?)

However, ABMs do have measurable disadvantages as well. They are computationally expensive and need more data....




It is clear that a synthetic population has distinct advantages over summary statistics. Certain analyses... (equity: don't want to code race/income/gender into mode choice, but want to group results thereby; not possible with summary stats).

Cite Bills and others showing advantages of synthetic population.

These claimed advantages are attributed to the ABM over the TBM, which is mostly correct. As mentioned previously, very few TBMs use a synthetic population, though it's not impossible.

A true advantage of the ABM ("tour-based") over the TBM is the idea of trip-chaining (or tours). Rather than model each trip individually, ABMs model an entire day's activities as zero or more "tours" (travel away from and return to home).

Modeling travel in this way allows for several advantages, including consistent mode choice (a car won't be driven home if it wasn't taken to work). Additionally, further types of analysis are possible, such as Dong et al.'s "activity-based accessibility" measure. <Explain what that is>.

Other advantages or analyses that tours let us perform. Probably a few paragraphs. Maybe it's worth mentioning MATSim or similar again.

Despite these claimed advantages, agencies in practice don't seem to switch very readily; many still use TBMs. There may be several reasons for this (incl. the disadvantages mentioned above).

## Research Gap

ABMs and TBMs have been researched extensively, with ABMs claiming many advantages over TBMs. Additionally, there are disadvantages of ABMs, and {synthetic vs summary stats} $\neq$ {ABM vs TBM}.

However, as of yet there are no side-by-side comparisons of ABMs and TBMs, using the same proposed development scenarios in both. This research seeks to close that gap by modeling multiple scenarios in a TBM and ABM and comparing the strengths and weaknesses of each. What input data is needed? What computational resources are needed? What analyses can we do with each type of model? Are certain types of scenarios suited to one or the other? And ultimately, is there a clear winner between ABMs and TBMs?


