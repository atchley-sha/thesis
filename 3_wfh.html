<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>An Illustrated Comparison of Activity-Based and Trip-Based Models in Utah - 6&nbsp; Scenario 3: Work From Home</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./discussion.html" rel="next">
<link href="./2_transit.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./3_wfh.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Scenario 3: Work From Home</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">An Illustrated Comparison of Activity-Based and Trip-Based Models in Utah</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">List of Acronyms</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lit-review.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Literature Review</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./methods.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Methodology</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./1_land_use.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Scenario 1: Land Use</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./2_transit.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Scenario 2: Transit</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./3_wfh.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Scenario 3: Work From Home</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./discussion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Discussion</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#telecommuting-considerations" id="toc-telecommuting-considerations" class="nav-link active" data-scroll-target="#telecommuting-considerations"><span class="header-section-number">6.1</span> Telecommuting Considerations</a></li>
  <li><a href="#trip-based-model" id="toc-trip-based-model" class="nav-link" data-scroll-target="#trip-based-model"><span class="header-section-number">6.2</span> Trip-based Model</a></li>
  <li><a href="#activity-based-model" id="toc-activity-based-model" class="nav-link" data-scroll-target="#activity-based-model"><span class="header-section-number">6.3</span> Activity-based model</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Scenario 3: Work From Home</span></h1>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
  </div>

<div class="quarto-title-meta">

      
  
    
  </div>
  

</header>

<p>With the onset of the COVID 19 pandemic, there were unprecedented numbers of people working from home <span class="citation" data-cites="bick_work_2021">(<a href="references.html#ref-bick_work_2021" role="doc-biblioref">Bick, Blandin, and Mertens 2021</a>)</span>. This scenario is an attempt to model an increase in people working from home, or telecommuting. There has been much research, especially in recent years, on the implications of telecommuting. While many MPOs have adjusted their models to account for telecommuting, and most models follow similar principles, it is not obvious what the best method is. <span class="citation" data-cites="bramberga_teleworking_2023">Bramberga (<a href="references.html#ref-bramberga_teleworking_2023" role="doc-biblioref">2023</a>)</span> even suggested that considerations for teleworking should be on a case by case basis because there is no single approach. Before describing how we set up the telecommuting scenario for our research, we will first describe some general considerations we had based on what is in the literature.</p>
<section id="telecommuting-considerations" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="telecommuting-considerations"><span class="header-section-number">6.1</span> Telecommuting Considerations</h2>
<p>The first thing to consider is the fact that different job types allow different levels of telecommuting <span class="citation" data-cites="yasenov_who_2020">(<a href="references.html#ref-yasenov_who_2020" role="doc-biblioref"><strong>yasenov_who_2020?</strong></a>)</span>. An office worker using a computer is much more capable to work from home than a construction worker. This fact is something that has been considered for telecommuting in most travel demand models <span class="citation" data-cites="bramberga_teleworking_2023">(<a href="references.html#ref-sener_copula_2011" role="doc-biblioref"><strong>sener_copula_2011?</strong></a>)</span>.</p>
<p>Another consideration that may seem obvious is there will be less home-based work trips when more people are telecommuting. What isn’t as obvious is the fact that there may be other types of trips produced when people are able to telecommute. <span class="citation" data-cites="kim_is_2017">Kim (<a href="references.html#ref-kim_is_2017" role="doc-biblioref">2017</a>)</span> talks about a rebound effect where travel behavior changes on the days people don’t have to commute to work and they make more trips for different reasons. In another study, <span class="citation" data-cites="zhu_impact_2014">Zhu and Mason (<a href="references.html#ref-zhu_impact_2014" role="doc-biblioref">2014</a>)</span> finds that there are more miles traveled on the days people telecommute. This could be due to the existence of a travel time budget, where an increase in trips of one purpose will decrease the time people allocate for trips of another purpose <span class="citation" data-cites="moreno_microscopic_2017">(<a href="references.html#ref-moreno_microscopic_2017" role="doc-biblioref">Moreno and Moeckel 2017</a>)</span>. Taking it a little further, <span class="citation" data-cites="ellder_telework_2020">Elldér (<a href="references.html#ref-ellder_telework_2020" role="doc-biblioref">2020</a>)</span> finds that distinguishing between people that work from home all day and part of the day might make a difference. Compared to those who commute to work, the Sweden study shows that those who worked from home the whole day had less trips and miles traveled, but those who worked from home only part of the day had more trips and miles traveled.</p>
<p>The last consideration we will discuss is the distance people are willing to travel when they telecommute. <span class="citation" data-cites="moeckel_working_2017">Moeckel (<a href="references.html#ref-moeckel_working_2017" role="doc-biblioref">2017</a>)</span> explains the correlation between the number of days people telecommute and the distance they are willing to live from their job If someone works completely remote, then they will have nothing forcing them to live close to their job. If they only work one day a week in the office, then they are still willing to live farther away than someone who has to work in the office two or three days a week. This information could change the trip length frequency distribution of home_based work trips.</p>
<p>In an attempt to keep our models accurate and allow the trip-based analysis to be compared with the activity-based analysis, we focused on these principles in our model design.</p>
<ul>
<li><p><strong>Different employment types have differing levels of telecommuting:</strong> We were able to use data provided by WFRC that gives a telecommute percentage for each employment type in each county in Utah.</p></li>
<li><p><strong>Home-based work trips decrease while other home-based trips increase:</strong></p></li>
<li><p><strong>There is a greater possibility that home-based work trips are longer:</strong></p></li>
</ul>
</section>
<section id="trip-based-model" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="trip-based-model"><span class="header-section-number">6.2</span> Trip-based Model</h2>
<p>In the WFRC trip-based model, it was already programmed to get rid of home-based work trips according to the type of employment. In the model set up, we needed to input a telecommute factor that would connect with the telecommute percentages in the county data. This factor was used to determine how many home-based work trips would be telecommute trips. The telecommute trips would not be counted during trip distribution.</p>
</section>
<section id="activity-based-model" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="activity-based-model"><span class="header-section-number">6.3</span> Activity-based model</h2>
<p>For Activitysim, we probably will generate a random number for each worker, and based on the type of job they have they also have a certain probability of WFH. If they WFH, then they make no work tours, and maybe more discretionary tours. If they would have made 2+ work tours, then maybe they make 1 fewer work tour.</p>


<div id="refs" class="references csl-bib-body hanging-indent" role="list" style="display: none">
<div id="ref-bick_work_2021" class="csl-entry" role="listitem">
Bick, Alexander, Adam Blandin, and Karel Mertens. 2021. <span>“Work from <span>Home</span> <span>Before</span> and <span>After</span> the <span>COVID</span>-19 <span>Outbreak</span>.”</span> https://doi.org/<a href="https://doi.org/10.24149/wp2017r2">https://doi.org/10.24149/wp2017r2</a>.
</div>
<div id="ref-bramberga_teleworking_2023" class="csl-entry" role="listitem">
Bramberga, Katrina Aleksandra. 2023. <span>“Teleworking in <span>Four</span>-<span>Step</span> <span>Transport</span> <span>Demand</span> <span>Models</span>.”</span> PhD thesis, KTH Royal Institute of Technology.
</div>
<div id="ref-ellder_telework_2020" class="csl-entry" role="listitem">
Elldér, Erik. 2020. <span>“Telework and Daily Travel: <span>New</span> Evidence from <span>Sweden</span>.”</span> <em>Journal of Transport Geography</em> 86 (June): 102777. <a href="https://doi.org/10.1016/j.jtrangeo.2020.102777">https://doi.org/10.1016/j.jtrangeo.2020.102777</a>.
</div>
<div id="ref-kim_is_2017" class="csl-entry" role="listitem">
Kim, Seung-Nam. 2017. <span>“Is Telecommuting Sustainable? <span>An</span> Alternative Approach to Estimating the Impact of Home-Based Telecommuting on Household Travel.”</span> <em>International Journal of Sustainable Transportation</em> 11 (2): 72–85. <a href="https://doi.org/10.1080/15568318.2016.1193779">https://doi.org/10.1080/15568318.2016.1193779</a>.
</div>
<div id="ref-moeckel_working_2017" class="csl-entry" role="listitem">
Moeckel, Rolf. 2017. <span>“Working from <span>Home</span>: <span>Modeling</span> the <span>Impact</span> of <span>Telework</span> on <span>Transportation</span> and <span>Land</span> <span>Use</span>.”</span> <em>Transportation Research Procedia</em>, Emerging technologies and models for transport and mobility, 26 (January): 207–14. <a href="https://doi.org/10.1016/j.trpro.2017.07.021">https://doi.org/10.1016/j.trpro.2017.07.021</a>.
</div>
<div id="ref-moreno_microscopic_2017" class="csl-entry" role="listitem">
Moreno, Ana Tsui, and Rolf Moeckel. 2017. <span>“Microscopic <span>Destination</span> <span>Choice</span>: <span>Incorporating</span> <span>Travel</span> <span>Time</span> <span>Budgets</span> as <span>Constraints</span>.”</span> <em>Transportation Research Procedia</em>.
</div>
<div id="ref-zhu_impact_2014" class="csl-entry" role="listitem">
Zhu, P., and S. G. Mason. 2014. <span>“The Impact of Telecommuting on Personal Vehicle Usage and Environmental Sustainability.”</span> <em>International Journal of Environmental Science and Technology</em> 11 (8): 2185–2200. <a href="https://doi.org/10.1007/s13762-014-0556-5">https://doi.org/10.1007/s13762-014-0556-5</a>.
</div>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./2_transit.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Scenario 2: Transit</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./discussion.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Discussion</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>