# Scenario 2: Improved Transit Service {#sec-transit}

{{< include _setup.qmd >}}

Our second scenario models changes in travel behavior as a result of changes to transportation infrastructure.
This model scenario, termed the "Transit" scenario, is based on a planned improvement to the FrontRunner commuter rail (CRT) line.
The FrontRunner runs along the Wasatch Front between Provo and Ogden, Utah, with several stops in between.
Currently, there is only one set of tracks for much of the line, and it is only possible for trains to pass each other near stations.
Because of this, headways are quite large, with trains running every half-hour in peak periods and hourly in off-peak periods.

A potential improvement to the FrontRunner would "double track" the entire route, allowing trains to pass each other at any point.
The main benefit of this improvement is a substantial decrease in headways, bringing them to 15 and 30 minutes for peak and off-peak service, respectively.
Two additional improvements are partial electrification of the FrontRunner, allowing for faster travel speeds, and extending the track farther south with additional stops.

The Transit scenario models these improvements to the FrontRunner.
The scenario adjusts the headways to 15/30 minutes for peak/off-peak service, increases travel speeds, and adds additional stops in Vineyard[^2_transit_test-1], Springville, Spanish Fork, and Payson.
shows the FrontRunner network along with the modeled changes.
In reality there would be additional transit improvements, such as a revised bus service network serving the Springville station, but for the sake of simplicity these additional improvements are not included in this model scenario.
Only the changes to the FrontRunner service are modeled here.

[^2_transit_test-1]: In 2019, the model year for the baseline scenario, the Vineyard station was not yet open, though the station has been operational since late 2022.

## Scenario Creation

In the WFRC model, this scenario is relatively easy to implement.
The headways are stored directly in the input data and are easily modified, and a year-2050 network with increased speeds and additional stations is already built into the model for future-year analysis.
The only additional change needed was to turn on the "park and ride" flag in the highway network at the node of each new station, which allows transfers between auto and transit modes at these nodes.

To implement this scenario in ActivitySim, only updated travel skims are needed.
As in the baseline scenario, ActivitySim directly uses the transit skims that are output from the WFRC model's network assignment in this model scenario.
Because the mode share of transit is relatively low, it is not expected that the highway travel times will be affected very much by this change.
The highway skims used for ActivitySim are therefore taken from the WFRC model baseline scenario and not updated for this scenario.
No other changes to ActivitySim are necessary to model this scenario.

## Scenario Analysis

One of the most straightforward analyses to perform is a comparison of the mode split between this and the baseline scenario.
TEST shows the number of trips by purpose and mode for each model, and compares these results between this scenario and the baseline scenario (*n.b.* "local transit" includes both light rail and bus travel).
Unsurprisingly, both models predict a significant increase in commuter rail trips.
The models differ, however, in which modes the new commuter rail trips come from.

For home-based other and non--home-based trips, the WFRC model shows virtually no change in the number of auto and non-motorized trips, while there is a significant decrease in the number of local transit trips.
Home-based work trips do see a decrease in auto trips with the improved transit, but there are still significantly fewer local transit trips compared to the baseline scenario.
This indicates that the new commuter rail trips are mostly coming from those who would have taken local transit in the baseline scenario.

ActivitySim, on the other hand, actually shows an *increase* in local transit trips for home-based work and non--home-based trips.
For home-based other trips, there is a decrease in local transit, but by percentage it is not nearly as significant as the decrease in the WFRC model.[^2_transit_test-2]
This shows that most new commuter rail trips in ActivitySim are coming from auto modes, rather than other transit modes.

[^2_transit_test-2]: The absolute difference in *number* of home-based other local transit trips between the scenarios is comparable between the two models, but since ActivitySim is predicting significantly more transit trips in the baseline scenario compared to the WFRC model, the percent change is much smaller in ActivitySim.

The discrepancy may be partially explained by the difference in the way trips are modeled.
In the WFRC model, trips are modeled in aggregate, with no interaction between separate trips.
Regardless of trip purpose, trips are treated essentially the same, though potentially with different coefficients in mode choice equations.
Even non--home-based trips are treated like any other trip during mode choice.
Additionally, there is a nesting structure to the mode choice step in the WFRC model.
The transit "nest" contains all transit modes, and so when the commuter rail service is improved the utility of commuter rail compared to other transit modes increases more than the utility of commuter rail compared to non-transit modes.
Many of the new commuter rail trips therefore come from those who would have taken transit otherwise.

ActivitySim, however, *does* model interactions between trips.
An individual who makes a commuter rail trip will (usually) not be able to drive for subsequent trips until they have returned home.
Because of this, individuals taking commuter rail are more likely to then take other forms of transit on the same tour.
There is a similar nesting structure in the mode choice model of ActivitySim as in the WFRC model, but this effect is less pronounced in part due the aforementioned structuring of trips into tours.

Figures [-@fig-tr-cube-trip-diff] and [-@fig-tr-asim-trip-diff] show the difference in trips by mode and purpose geographically.
These figures tell much the same story as @tbl-tr-mode-split, and unsurprisingly many of the new commuter rail trips are produced in zones near the new FrontRunner stations.
Additionally, there are a large number of new commuter rail trips that occur along the entire length of the FrontRunner line.
Some of this increase can be attributed to trips with a destination or attraction near a new FrontRunner station, FigureÂ \ref{fig-test} and much of the increase can be attributed to the increased frequency of service.

<!-- ```{=latex} -->

<!-- \begin{sidewaysfigure} -->

<!-- \centering{ -->

<!-- \includegraphics{qmd/2_transit_files/figure-pdf/fig-tr-asim-trip-diff-1.png} -->

<!-- } -->

<!-- \caption{\label{fig-test}cube} -->

<!-- \end{sidewaysfigure} -->

<!-- ``` -->

```{r}
#| label: fig-tr-cube-trip-diff
#| fig-cap: cube2
#| fig-env: sidewaysfigure
#| fig-width: 8
#| fig-height: 6.5

targets::tar_read(cube_tr_diff_by_district_plot)
```

```{r}
#| label: fig-tr-asim-trip-diff
#| fig-cap: asim
#| fig-env: sidewaysfigure
#| fig-width: 8
#| fig-height: 6.5

targets::tar_read(asim_tr_diff_by_district_plot)
```

One particularly interesting analysis that can be done with an ABM is to see who changed modes with the improved transit.
Because trips are modeled individually rather than in aggregate, it is possible to identify trips that switch modes between the scenarios.
@fig-tr-mode-switching shows the distribution of these "switched" trips.
These are trips that are "the same" between scenarios and differ only by mode.
For the purposes of this analysis, trips are considered "the same" between scenarios if they are made by the same person and have the same origin and destination zones, time of day[^2_transit_test-3], and tour and trip purpose.
Most of these trips also share the same mode, which is to be expected, but many do not.
@fig-tr-mode-switching is filtered to show only trips that do not share the same mode between scenarios.

[^2_transit_test-3]: ActivitySim models time of day as the "departure hour" for each trip.
    If two trips share the same departure hour, they are considered here to have happened at the same time.

There is some amount of randomness in the way ActivitySim determines trip modes, though.
This randomness is seen partly in trips that switch away from commuter rail despite the improved commuter rail service, as well as some trips that switch to modes other than commuter rail, especially to "Drive Alone".
Although, part of the switch from "Carpool" to "Drive Alone" can be explained as previously-carpool trips where all but one vehicle occupant switched to another mode, leaving one person in the vehicle for the trip.
Overall, though, the randomness is not a significant percentage of the overall mode switching seen in @fig-tr-mode-switching.

